<!DOCTYPE html>
<!-- Generated by Vantle::Web -->
<html lang="en" data-context="vantle" data-page="generation" data-root="../../">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vantle.Generation</title>
<link rel="icon" href="../../resource/favicon.ico">
<script>try{let d=document.documentElement;let t=localStorage.getItem('theme');if(t)d.setAttribute('data-theme',t)}catch(e){}</script>
<link rel="stylesheet" href="../../resource/system/document/vantle.css">
<script type="module">
import init from '../../resource/system/document/compute.js';
await init();
</script>
</head>
<body>
<nav>
  <a class="nav-logo" href="../../index.html">
    <img src="../../resource/logo.png" alt="Vantle">
  </a>
  <div class="nav-links">
    <div class="nav-dropdown">
      <a href="../../index.html">Vantle</a>
      <div class="nav-dropdown-menu">
        <a href="../../info.html">Info</a>
        <a href="../../notice.html">Notice</a>
        <a href="../../module.html">Module</a>
        <a href="../../license.html">License</a>
      </div>
    </div>
    <div class="nav-dropdown">
      <a href="../../Molten/">Molten</a>
      <div class="nav-dropdown-menu">
        <a href="../../Molten/system/spatialize/">Spatialize</a>
        <hr>
        <a href="../../Molten/info.html">Info</a>
        <a href="../../Molten/notice.html">Notice</a>
        <a href="../../Molten/license.html">License</a>
      </div>
    </div>
    <a href="../../system/generation/">Generation</a>
    <a href="../../system/observation/">Observation</a>
    <a href="../../system/spatialize/">Spatialize</a>
  </div>
</nav>
<div class="layout">
  <aside class="sidebar" aria-label="Page navigation">
    <div class="sidebar-label">Pages</div>
    <a href="../../index.html">Vantle</a>
    <a href="../../module.html">Module</a>
    <div class="sidebar-label">Legal</div>
    <a href="../../info.html">Info</a>
    <a href="../../notice.html">Notice</a>
    <a href="../../license.html">License</a>
  </aside>
  <main>
    <h1 id="generation">Generation</h1>
    <p class="subtitle">Code generation framework for Rust</p>
    <hr>
    <p>This document describes the <strong>Generation</strong> framework, a code generation system for Rust projects built on Bazel.</p>
    <hr>
    <section>
      <h2 id="autotest">Autotest</h2>
      <p>Autotest is an implementation of the Generation framework that provides JSON-driven test generation, eliminating boilerplate and enabling data-driven testing.</p>
      <section>
        <h3 id="template">Template</h3>
        <p>Write functions in a <code>.template.rs</code> file:</p>
        <div class="code-block" data-language="rust"><span class="node-use"><span class="syntax-keyword">use</span> component<span class="syntax-punctuation">::</span>graph<span class="syntax-punctuation">::</span>state<span class="syntax-punctuation">::</span>particle<span class="syntax-punctuation">::</span><span class="syntax-entity">Particle</span><span class="syntax-punctuation">;</span>
</span>
<span class="node-function"><span class="syntax-keyword">fn</span> <span class="syntax-entity">disjoint</span><span class="node-parameters"><span class="syntax-punctuation">(</span><span class="node-parameter"><span class="node-pattern"><span class="syntax-variable">candidate</span></span><span class="syntax-punctuation">:</span> <span class="node-type"><span class="syntax-entity">Particle</span><span class="syntax-punctuation">&lt;</span><span class="node-type"><span class="syntax-entity">String</span></span><span class="syntax-punctuation">&gt;</span></span></span>, <span class="node-parameter"><span class="node-pattern"><span class="syntax-variable">basis</span></span><span class="syntax-punctuation">:</span> <span class="node-type"><span class="syntax-entity">Particle</span><span class="syntax-punctuation">&lt;</span><span class="node-type"><span class="syntax-entity">String</span></span><span class="syntax-punctuation">&gt;</span></span></span><span class="syntax-punctuation">)</span></span> <span class="syntax-operator">-&gt;</span> <span class="node-type"><span class="syntax-entity">Option</span><span class="syntax-punctuation">&lt;</span><span class="node-type"><span class="syntax-entity">Particle</span><span class="syntax-punctuation">&lt;</span><span class="node-type"><span class="syntax-entity">String</span></span><span class="syntax-punctuation">&gt;</span></span><span class="syntax-punctuation">&gt;</span></span><span class="node-block"> {
<span class="node-statement">    <span class="node-expression"><span class="node-expression"><span class="node-expression"><span class="syntax-variable">candidate</span></span><span class="syntax-punctuation">.</span><span class="syntax-function">disjoint</span><span class="syntax-punctuation">(</span><span class="node-expression"><span class="syntax-punctuation">&amp;</span><span class="node-expression"><span class="syntax-variable">basis</span></span></span><span class="syntax-punctuation">)</span></span><span class="syntax-punctuation">.</span><span class="syntax-function">map</span><span class="syntax-punctuation">(</span><span class="node-expression"><span class="syntax-punctuation">|</span><span class="node-pattern">_</span><span class="syntax-punctuation">|</span> <span class="node-expression"><span class="node-expression"><span class="syntax-variable">candidate</span></span><span class="syntax-punctuation">.</span><span class="syntax-function">clone</span><span class="syntax-punctuation">(</span><span class="syntax-punctuation">)</span></span></span><span class="syntax-punctuation">)</span></span>
</span>}
</span></span></div>
      </section>
      <section>
        <h3 id="cases">Cases</h3>
        <p>Define test data in <code>cases.json</code>:</p>
        <div class="code-block" data-language="json"><span class="node-object"><span class="syntax-punctuation">{</span>
<span class="node-property">    <span class="syntax-entity">"functions"</span><span class="syntax-punctuation">:</span> <span class="node-array"><span class="syntax-punctuation">[</span>
        <span class="node-object"><span class="syntax-punctuation">{</span>
<span class="node-property">            <span class="syntax-entity">"function"</span><span class="syntax-punctuation">:</span> <span class="node-value"><span class="syntax-string">"disjoint"</span><span class="syntax-punctuation">,</span>
</span></span><span class="node-property">            <span class="syntax-entity">"tags"</span><span class="syntax-punctuation">:</span> <span class="node-array"><span class="syntax-punctuation">[</span><span class="node-value"><span class="syntax-string">"particle"</span></span>, <span class="node-value"><span class="syntax-string">"disjoint"</span></span><span class="syntax-punctuation">]</span><span class="syntax-punctuation">,</span>
</span></span><span class="node-property">            <span class="syntax-entity">"parameters"</span><span class="syntax-punctuation">:</span> <span class="node-object"><span class="syntax-punctuation">{</span><span class="node-property"><span class="syntax-entity">"candidate"</span><span class="syntax-punctuation">:</span> <span class="node-array"><span class="syntax-punctuation">[</span><span class="node-array"><span class="syntax-punctuation">[</span><span class="node-value"><span class="syntax-string">"a"</span></span>, <span class="node-value"><span class="syntax-constant">1</span></span><span class="syntax-punctuation">]</span></span><span class="syntax-punctuation">]</span></span></span><span class="node-property">, <span class="syntax-entity">"basis"</span><span class="syntax-punctuation">:</span> <span class="node-array"><span class="syntax-punctuation">[</span><span class="node-array"><span class="syntax-punctuation">[</span><span class="node-value"><span class="syntax-string">"b"</span></span>, <span class="node-value"><span class="syntax-constant">1</span></span><span class="syntax-punctuation">]</span></span><span class="syntax-punctuation">]</span></span></span><span class="syntax-punctuation">}</span><span class="syntax-punctuation">,</span>
</span></span><span class="node-property">            <span class="syntax-entity">"returns"</span><span class="syntax-punctuation">:</span> <span class="node-object"><span class="syntax-punctuation">{</span><span class="node-property"><span class="syntax-entity">"()"</span><span class="syntax-punctuation">:</span> <span class="node-array"><span class="syntax-punctuation">[</span><span class="node-array"><span class="syntax-punctuation">[</span><span class="node-value"><span class="syntax-string">"a"</span></span>, <span class="node-value"><span class="syntax-constant">1</span></span><span class="syntax-punctuation">]</span></span><span class="syntax-punctuation">]</span></span></span><span class="syntax-punctuation">}</span><span class="syntax-punctuation">,</span>
</span></span><span class="node-property">            <span class="syntax-entity">"cases"</span><span class="syntax-punctuation">:</span> <span class="node-array"><span class="syntax-punctuation">[</span>
                <span class="node-object"><span class="syntax-punctuation">{</span>
<span class="node-property">                    <span class="syntax-entity">"tags"</span><span class="syntax-punctuation">:</span> <span class="node-array"><span class="syntax-punctuation">[</span><span class="node-value"><span class="syntax-string">"empty"</span></span><span class="syntax-punctuation">]</span><span class="syntax-punctuation">,</span>
</span></span><span class="node-property">                    <span class="syntax-entity">"parameters"</span><span class="syntax-punctuation">:</span> <span class="node-object"><span class="syntax-punctuation">{</span><span class="node-property"><span class="syntax-entity">"basis"</span><span class="syntax-punctuation">:</span> <span class="node-array"><span class="syntax-punctuation">[]</span></span></span><span class="syntax-punctuation">}</span><span class="syntax-punctuation">,</span>
</span></span><span class="node-property">                    <span class="syntax-entity">"returns"</span><span class="syntax-punctuation">:</span> <span class="node-object"><span class="syntax-punctuation">{</span><span class="node-property"><span class="syntax-entity">"()"</span><span class="syntax-punctuation">:</span> <span class="node-array"><span class="syntax-punctuation">[</span><span class="node-array"><span class="syntax-punctuation">[</span><span class="node-value"><span class="syntax-string">"a"</span></span>, <span class="node-value"><span class="syntax-constant">1</span></span><span class="syntax-punctuation">]</span></span><span class="syntax-punctuation">]</span></span></span><span class="syntax-punctuation">}</span>
</span></span>                <span class="syntax-punctuation">}</span>
</span>            <span class="syntax-punctuation">]</span>
</span></span>        <span class="syntax-punctuation">}</span>
</span>    <span class="syntax-punctuation">]</span>
</span></span><span class="syntax-punctuation">}</span></span></div>
      </section>
      <section>
        <h3 id="build">Build</h3>
        <p>Use Bazel rules to generate and run tests:</p>
        <div class="code-block" data-language="starlark"><span class="syntax-function">rust_autotest_template</span><span class="syntax-punctuation">(</span>
    <span class="syntax-variable">name</span> <span class="syntax-operator">=</span> <span class="syntax-string">&quot;</span><span class="syntax-string">template</span><span class="syntax-string">&quot;</span><span class="syntax-punctuation">,</span>
    <span class="syntax-variable">src</span> <span class="syntax-operator">=</span> <span class="syntax-string">&quot;</span><span class="syntax-string">function.template.rs</span><span class="syntax-string">&quot;</span><span class="syntax-punctuation">,</span>
    <span class="syntax-variable">deps</span> <span class="syntax-operator">=</span> <span class="syntax-punctuation">[</span><span class="syntax-string">&quot;</span><span class="syntax-string">//Molten/component/graph/state/particle:module</span><span class="syntax-string">&quot;</span><span class="syntax-punctuation">]</span><span class="syntax-punctuation">,</span>
<span class="syntax-punctuation">)</span>

<span class="syntax-function">rust_autotest</span><span class="syntax-punctuation">(</span>
    <span class="syntax-variable">name</span> <span class="syntax-operator">=</span> <span class="syntax-string">&quot;</span><span class="syntax-string">function</span><span class="syntax-string">&quot;</span><span class="syntax-punctuation">,</span>
    <span class="syntax-variable">template</span> <span class="syntax-operator">=</span> <span class="syntax-string">&quot;</span><span class="syntax-string">:template</span><span class="syntax-string">&quot;</span><span class="syntax-punctuation">,</span>
    <span class="syntax-variable">cases</span> <span class="syntax-operator">=</span> <span class="syntax-string">&quot;</span><span class="syntax-string">:cases.json</span><span class="syntax-string">&quot;</span><span class="syntax-punctuation">,</span>
    <span class="syntax-variable">deps</span> <span class="syntax-operator">=</span> <span class="syntax-punctuation">[</span><span class="syntax-string">&quot;</span><span class="syntax-string">//Molten/component/graph/state/particle:module</span><span class="syntax-string">&quot;</span><span class="syntax-punctuation">]</span><span class="syntax-punctuation">,</span>
<span class="syntax-punctuation">)</span></div>
      </section>
      <section>
        <h3 id="features">Features</h3>
        <ul>
          <li><strong>Parameter shadowing</strong>: Function-level defaults with case-level overrides</li>
          <li><strong>Tag organization</strong>: Filter tests by tags</li>
          <li><strong>Schema validation</strong>: Parameters match function signatures</li>
          <li><strong>Rich diagnostics</strong>: Error reporting via miette</li>
        </ul>
      </section>
    </section>
    <hr>
    <section>
      <h2 id="structure">Structure</h2>
      <pre><code>component/generation/     Schema and types
system/generation/        Generator binary</code></pre>
    </section>
    <footer>
      <p>© 2025 Vantle · <a href="https://vantle.org">@robert.vanderzee</a></p>
      <a class="footer-icon" href="https://github.com/Vantle/Vantle" aria-label="GitHub"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a>
    </footer>
  </main>
  <aside class="outline" aria-label="Table of contents">
    <a href="#generation" data-depth="0">Generation</a>
    <a href="#autotest" data-depth="1">Autotest</a>
    <a href="#template" data-depth="2">Template</a>
    <a href="#cases" data-depth="2">Cases</a>
    <a href="#build" data-depth="2">Build</a>
    <a href="#features" data-depth="2">Features</a>
    <a href="#structure" data-depth="1">Structure</a>
  </aside>
</div>
</body>
</html>
